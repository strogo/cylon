<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta content="width=device-width, initial-scale=1.0" name="viewport">
<meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
<meta content="A Cylon.JS code example" name="description">
<meta content="The Hybrid Group" name="author">
<title>Cylon.JS Example - Master</title>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script><!-- %link{href: "http://fonts.googleapis.com/css?family=Source+Code+Pro:300,400,500,700", rel: "stylesheet", type: "text/css"} --><link href="//fonts.googleapis.com/css?family=Inconsolata:400,700%7CMontserrat:700" rel="stylesheet">
<link href="/stylesheets/style.css" rel="stylesheet">
<link href="/favicon.ico" rel="shortcut icon" type="image/gif">
</head>
<body>
    <div class="app">
      <div class="w">
        <header class="app-header" role="banner"><div class="display">
            <h1 class="app-logo">
              <a href="/">Cylon</a>
            </h1>
          </div>
          <span class="menu">
            <a href="/documentation" class="item">Docs</a>
            <a href="/hardware" class="item">Hardware</a>
            
            <a href="/blog" class="item">Blog</a>
            <a class="item" target="blanck" href="https://github.com/hybridgroup/cylon/">Github</a>
          </span>
        </header>
</div>
      <div class="page-title">
        <div class="w">
          <h1 class="title">Example: Master</h1>
          <h2 class="subtitle">You can find more versions of this example <a href="https://github.com/hybridgroup/cylon/tree/master/examples/master" target="blank" class="repository">here.</a>
</h2>
        </div>
      </div>
      <div class="container">
        <div class="main" role="main">
          <section class="content full"><h1 id="master">Master</h1>
            
            <p>For this example, we're going to provide a simple demonstration of how Cylon's
            master functionality works. Cylon can be fed an arbitrary number of robots, and
            it will then take care of all of them, starting and stopping all of them as
            needed.</p>
            
            <p>For this example, we're going to be using three Spheros, but you don't actually
            need the hardware for the example to work. Do make sure you have the
            <code>cylon-sphero</code> module installed, though.</p>
            
            <p>First, let's load up Cylon</p>
            
            <pre class="CodeRay">Cylon = require 'cylon'
</pre>
            
            <p>With that in place, now we can start defining our robots. They'll all behave
            similarly, but have unique characteristics (their name and port), so let's
            define an array of objects to hold these differences. Later, we can instantiate
            a base robot and change it's attributes as needed.</p>
            
            <pre class="CodeRay">bots = [
  { port: '/dev/cu.Sphero-RGB', name: 'Huey' },
  { port: '/dev/cu.Sphero-GRB', name: 'Dewey' },
  { port: '/dev/cu.Sphero-BRG', name: 'Louie' }
]
</pre>
            
            <p>Now we can define our cleverly-named <code>SpheroRobot</code> class. This will be the base
            class for all three of the robots.</p>
            
            <pre class="CodeRay">class SpheroRobot
</pre>
            
            <p>Every robot needs to connect to a Sphero. We're doing this using the
            <code>cylon-sphero</code> adaptor.</p>
            
            <pre class="CodeRay">  connection: { name: 'Sphero', adaptor: 'sphero' }
</pre>
            
            <p>We'll just give our robots some basic work so we can tell they're actually
            working:</p>
            
            <pre class="CodeRay">  work: (my) -&gt;
    Logger.info "Robot \1my.name} is now working!"
</pre>
            
            <p>And that's all we need for that.</p>
            
            <p>Next up, we'll create Cylon robots by making an instance of the <code>SpheroRobot</code>
            class, and modifying the attributes that are unique to each robot. After the
            customized robot is ready, we'll feed it into Cylon.</p>
            
            <pre class="CodeRay">for bot in bots
  robot = new SpheroRobot
  robot.connection.port = bot.port
  robot.name = bot.name

  Cylon.robot robot
</pre>
            
            <p>And now Cylon knows about all the robots we care about for this example, and
            what they do. All that's left is to start them all. The <code>.start()</code> method on
            Cylon triggers the <code>.start()</code> command on all the robots we've told Cylon about,
            so all three robots will start at once.</p>
            
            <pre class="CodeRay">Cylon.start()
</pre>
          </section>
</div>
      </div>
    </div>
    <footer class="app-footer"><div class="w">
        <div class="copyright">
          Â© Copyright 2012-2013
          <a href="http://hybridgroup.com">The Hybrid Group.</a>
        </div>
      </div>
    </footer><script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      
      ga('create', 'UA-46433484-2', 'cylonjs.com');
      ga('send', 'pageview');
    </script>
</body>
</html>
